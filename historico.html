<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lyra</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header>
        <nav>
            <div class="logo"><a href="index.html">Lyra</a></div>
            <ul>
                <li><a href="login.html">Log-in</a></li>
                <li><a href="historico.html">Histórico</a></li>
                <li><a href="suporte.html">Suporte</a></li>
            </ul>
        </nav>
    </header>

    <section class="center">
        <h1>Histórico</h1>
        <p>Confira seu histórico de faixas ouvidas!</p>

        <div class="historico">
            <form action="nova-recomendacao.html">
                <button type="submit">Adicionar nova faixa</button>
            </form>
            <div id="faixas">
                
            </div>
        </div>

    </section>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const response = await fetch('http://127.0.0.1:5000/historico');
                const historico = await response.json();
                const faixasDiv = document.getElementById('faixas');

                historico.forEach(faixa => {
                    const faixaElement = document.createElement('div');
                    faixaElement.innerHTML = `
                    <p>Data: ${faixa[0]}</p>
                    <p>Nome: ${faixa[1]}</p>
                    <p>Link: <a href="${faixa[2]}" target="_blank">Ouça novamente aqui</a></p>
                    `;

                    faixasDiv.appendChild(faixaElement);
                });
            } catch (error) {
                console.error('Erro ao buscar histórico:', error);
            }
        });
    </script>
</body>

</html>