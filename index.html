<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lyra</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header>
        <nav>
            <div class="logo"><a href="index.html">Lyra</a></div>
            <ul>
                <li><a href="login.html">Log-in</a></li>
                <li><a href="historico.html">Histórico</a></li>
                <li><a href="suporte.html">Suporte</a></li>
            </ul>
        </nav>
    </header>

    <section class="center">
        <h1>Lyra</h1>
        <p>Seja bem vindo!</p>
        <div class="left">
            <div class="upper-left">
                <div class="opcoes">
                    <form action="nova-recomendacao.html">
                        <button type="submit">Nova recomendação</button>
                    </form>

                    <form action="favoritas.html">
                        <button type="submit">Minhas faixas favortias</button>
                    </form>
                </div>
            </div>

            <div class="bottom-left">
                <div class="relogio" id="clock"></div>
            </div>
        </div>
        <div class="upper-right">
            <div class="opcoes">
                <iframe id="spotify-embed" src="" width="300" height="380" frameborder="0"
                    allowtransparency="true" allow="encrypted-media"></iframe>

            </div>
        </div>

    </section>
    <script>
        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const timeString = `${hours}:${minutes}:${seconds}`;
            document.getElementById('clock').textContent = timeString;
        }

        setInterval(updateClock, 1000);
        updateClock();

        async function loadSpotifyEmbed() {
        try {
            const response = await fetch('http://127.0.0.1:5000/get-track');
            const data = await response.json();
            document.getElementById('spotify-embed').src = data.embed_url;
        } catch (error) {
            console.error("Erro ao carregar o Spotify Embed:", error);
        }
    }

    // Carregar a faixa ao carregar a página
    loadSpotifyEmbed();
    </script>
</body>

</html>